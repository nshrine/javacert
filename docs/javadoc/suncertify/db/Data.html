<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Thu Feb 18 21:45:53 GMT 2016 -->
<title>Data</title>
<meta name="date" content="2016-02-18">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Data";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../suncertify/db/BookingDBFactory.html" title="class in suncertify.db"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../suncertify/db/DB.html" title="interface in suncertify.db"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?suncertify/db/Data.html" target="_top">Frames</a></li>
<li><a href="Data.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">suncertify.db</div>
<h2 title="Class Data" class="title">Class Data</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>suncertify.db.Data</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../suncertify/db/BookingData.html" title="class in suncertify.db">BookingData</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Data</span>
extends java.lang.Object
implements <a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></pre>
<div class="block">Database access class for the URLyBird application.
 <p>
 This class uses a binary file as its data store and ensures synchronous
 access to the data file by requiring clients to obtain a lock cookie before
 they can write to the file, thereby preventing write access by other clients
 until the record currently being modified is unlocked.
 <p>
 This class is threadsafe allowing concurrent access to the data file 
 by multiple client threads using a single shared instance.
 <p>
 If a client tries to lock a record that is already locked by another object
 the current thread will sleep until the client with the lock releases the
 lock on the required record.
 <p>
 Where methods take a record number as an argument, record numbers start at
 1 for the first record as opposed to 0.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Nick Shrine</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Random</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#cookieGenerator">cookieGenerator</a></span></code>
<div class="block">Object that generates the lock cookies.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.io.RandomAccessFile</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#db">db</a></span></code>
<div class="block">The database file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#DELETED">DELETED</a></span></code>
<div class="block">Indicates the record is deleted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#deletedRecords">deletedRecords</a></span></code>
<div class="block">The number of deleted records in the database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#ENCODING">ENCODING</a></span></code>
<div class="block">The character encoding to be used.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#fieldCount">fieldCount</a></span></code>
<div class="block">The number of fields per record in the database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#headerLength">headerLength</a></span></code>
<div class="block">The length in bytes of the database header preceding the data records 
 that contains the schema information.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#lockedRecords">lockedRecords</a></span></code>
<div class="block">A map containing the list of currently locked records where the key
 is the record number and the value is the cookie the record is
 locked with.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#MAGIC_COOKIE">MAGIC_COOKIE</a></span></code>
<div class="block">The value that must be at the start of a valid data file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#numRecords">numRecords</a></span></code>
<div class="block">The number of records in the database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#recordLength">recordLength</a></span></code>
<div class="block">The length of a record in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#schema">schema</a></span></code>
<div class="block">A map of the database schema where the keys are the field names
 and the values are the field lengths.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#VALID">VALID</a></span></code>
<div class="block">Indicates the record is valid and not deleted.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#Data-java.lang.String-">Data</a></span>(java.lang.String&nbsp;filename)</code>
<div class="block">Constructs a data object that controls access to the data file
 specified by the filename parameter.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#checkLock-int-long-">checkLock</a></span>(int&nbsp;recNo,
         long&nbsp;cookie)</code>
<div class="block">Checks if the record specified by the record number is locked with
 the given lock cookie and throws a SecurityException if it isn't.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#create-java.lang.String:A-">create</a></span>(java.lang.String[]&nbsp;data)</code>
<div class="block">Creates a new record in the database (possibly reusing a
 deleted entry).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#delete-int-long-">delete</a></span>(int&nbsp;recNo,
      long&nbsp;lockCookie)</code>
<div class="block">Deletes a record, making the record number and associated disk
 storage available for reuse.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#find-java.lang.String:A-">find</a></span>(java.lang.String[]&nbsp;criteria)</code>
<div class="block">Returns an array of record numbers that match the specified
 criteria.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#findRecord-int-">findRecord</a></span>(int&nbsp;recNo)</code>
<div class="block">Returns a file pointer to the start of the requested record within
 the data file if the record exists, otherwise a
 <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db"><code>RecordNotFoundException</code></a> is thrown.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#findUndeletedRecord-int-">findUndeletedRecord</a></span>(int&nbsp;recNo)</code>
<div class="block">Returns the file pointer with which to locate the start of the
 requested record within the data file.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#getNumRecords--">getNumRecords</a></span>()</code>
<div class="block">Returns the number of records in the data file,
 not including records marked as deleted.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#lock-int-">lock</a></span>(int&nbsp;recNo)</code>
<div class="block">Locks a record so that it can only be updated or deleted by this client.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#moveTo-int-">moveTo</a></span>(int&nbsp;recNo)</code>
<div class="block">Returns a file pointer to the start of the requested record within
 the data file, even if the record does not exist so that the file
 pointer can be positioned for writing new records.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#read-int-">read</a></span>(int&nbsp;recNo)</code>
<div class="block">Reads a record from the file.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#unlock-int-long-">unlock</a></span>(int&nbsp;recNo,
      long&nbsp;cookie)</code>
<div class="block">Releases the lock on a record.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#update-int-java.lang.String:A-long-">update</a></span>(int&nbsp;recNo,
      java.lang.String[]&nbsp;data,
      long&nbsp;lockCookie)</code>
<div class="block">Modifies the fields of a record.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../suncertify/db/Data.html#write-java.lang.String:A-">write</a></span>(java.lang.String[]&nbsp;data)</code>
<div class="block">Writes the data given as the argument to the current location in
 the data file.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ENCODING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ENCODING</h4>
<pre>public static final&nbsp;java.lang.String ENCODING</pre>
<div class="block">The character encoding to be used.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#suncertify.db.Data.ENCODING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="VALID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VALID</h4>
<pre>public static final&nbsp;byte VALID</pre>
<div class="block">Indicates the record is valid and not deleted.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#suncertify.db.Data.VALID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DELETED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DELETED</h4>
<pre>public static final&nbsp;byte DELETED</pre>
<div class="block">Indicates the record is deleted.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#suncertify.db.Data.DELETED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAGIC_COOKIE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAGIC_COOKIE</h4>
<pre>public static final&nbsp;int MAGIC_COOKIE</pre>
<div class="block">The value that must be at the start of a valid data file.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#suncertify.db.Data.MAGIC_COOKIE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="db">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>db</h4>
<pre>protected final&nbsp;java.io.RandomAccessFile db</pre>
<div class="block">The database file.</div>
</li>
</ul>
<a name="fieldCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fieldCount</h4>
<pre>protected final&nbsp;int fieldCount</pre>
<div class="block">The number of fields per record in the database.</div>
</li>
</ul>
<a name="schema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>schema</h4>
<pre>protected final&nbsp;java.util.Map schema</pre>
<div class="block">A map of the database schema where the keys are the field names
 and the values are the field lengths.</div>
</li>
</ul>
<a name="headerLength">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>headerLength</h4>
<pre>protected final&nbsp;int headerLength</pre>
<div class="block">The length in bytes of the database header preceding the data records 
 that contains the schema information.</div>
</li>
</ul>
<a name="recordLength">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordLength</h4>
<pre>protected final&nbsp;int recordLength</pre>
<div class="block">The length of a record in bytes.</div>
</li>
</ul>
<a name="lockedRecords">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockedRecords</h4>
<pre>protected final&nbsp;java.util.Map lockedRecords</pre>
<div class="block">A map containing the list of currently locked records where the key
 is the record number and the value is the cookie the record is
 locked with.</div>
</li>
</ul>
<a name="cookieGenerator">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cookieGenerator</h4>
<pre>protected final&nbsp;java.util.Random cookieGenerator</pre>
<div class="block">Object that generates the lock cookies.</div>
</li>
</ul>
<a name="numRecords">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numRecords</h4>
<pre>protected&nbsp;int numRecords</pre>
<div class="block">The number of records in the database.</div>
</li>
</ul>
<a name="deletedRecords">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deletedRecords</h4>
<pre>protected&nbsp;int deletedRecords</pre>
<div class="block">The number of deleted records in the database.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Data-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Data</h4>
<pre>public&nbsp;Data(java.lang.String&nbsp;filename)
     throws java.io.FileNotFoundException,
            <a href="../../suncertify/db/InvalidDataFileException.html" title="class in suncertify.db">InvalidDataFileException</a>,
            java.io.IOException</pre>
<div class="block">Constructs a data object that controls access to the data file
 specified by the filename parameter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - the binary file containing the data.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.FileNotFoundException</code> - if the data cannot be read.</dd>
<dd><code><a href="../../suncertify/db/InvalidDataFileException.html" title="class in suncertify.db">InvalidDataFileException</a></code> - if the data file is not a valid 
          URLyBird data file.</dd>
<dd><code>java.io.IOException</code> - if there is an IO error opening the data file.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="read-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;read(int&nbsp;recNo)
                        throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Reads a record from the file. Returns an array where each element is a
 record value.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#read-int-">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be read.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array where each element is a record value.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record does not exist or there is
          an error accessing the database.</dd>
</dl>
</li>
</ul>
<a name="update-int-java.lang.String:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;update(int&nbsp;recNo,
                   java.lang.String[]&nbsp;data,
                   long&nbsp;lockCookie)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a>,
                   <a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></pre>
<div class="block">Modifies the fields of a record. The new value for field n 
 appears in data[n]. Throws SecurityException
 if the record is locked with a cookie other than lockCookie.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#update-int-java.lang.String:A-long-">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be modified.</dd>
<dd><code>data</code> - the modified data.</dd>
<dd><code>lockCookie</code> - the cookie that the record was locked with.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record does not exist or there is
          an error accessing the database.</dd>
<dd><code><a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></code> - if the record is locked with a cookie other
          than lockCookie.</dd>
</dl>
</li>
</ul>
<a name="delete-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(int&nbsp;recNo,
                   long&nbsp;lockCookie)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a>,
                   <a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></pre>
<div class="block">Deletes a record, making the record number and associated disk
 storage available for reuse.
 Throws SecurityException if the record is locked with a cookie
 other than lockCookie.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#delete-int-long-">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be deleted.</dd>
<dd><code>lockCookie</code> - the cookie that the record was locked with.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record does not exist or there is
          an error reading the database.</dd>
<dd><code><a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></code> - if the record is locked with a cookie
          other than lockCookie.</dd>
</dl>
</li>
</ul>
<a name="find-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre>public&nbsp;int[]&nbsp;find(java.lang.String[]&nbsp;criteria)</pre>
<div class="block">Returns an array of record numbers that match the specified
 criteria. Field n in the database file is described by
 criteria[n]. A null value in criteria[n] matches any field
 value. A non-null  value in criteria[n] matches any field
 value that begins with criteria[n]. (For example, "Fred"
 matches "Fred" or "Freddy".)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#find-java.lang.String:A-">find</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>criteria</code> - the criteria to be matched.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array of record numbers that match the specified
          criteria.</dd>
</dl>
</li>
</ul>
<a name="create-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;int&nbsp;create(java.lang.String[]&nbsp;data)
           throws <a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db">DuplicateKeyException</a></pre>
<div class="block">Creates a new record in the database (possibly reusing a
 deleted entry). Inserts the given data, and returns the record
 number of the new record.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#create-java.lang.String:A-">create</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - the data for the new record.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the record number of the new record.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db">DuplicateKeyException</a></code> - unimplemented.</dd>
</dl>
</li>
</ul>
<a name="lock-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>public&nbsp;long&nbsp;lock(int&nbsp;recNo)
          throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Locks a record so that it can only be updated or deleted by this client.
 Returned value is a cookie that must be used when the record is unlocked,
 updated, or deleted. If the specified record is already locked by a 
 different client, the current thread gives up the CPU and consumes no 
 CPU cycles until the record is unlocked.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#lock-int-">lock</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be locked.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a cookie that must be used when the record is unlocked,
          updated, or deleted.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record does not exists or there is
          an error accessing the database.</dd>
</dl>
</li>
</ul>
<a name="unlock-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>public&nbsp;void&nbsp;unlock(int&nbsp;recNo,
                   long&nbsp;cookie)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a>,
                   <a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></pre>
<div class="block">Releases the lock on a record. Cookie must be the cookie
 returned when the record was locked; otherwise throws SecurityException.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../suncertify/db/DB.html#unlock-int-long-">unlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DB.html" title="interface in suncertify.db">DB</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be unlocked.</dd>
<dd><code>cookie</code> - the cookie that the record was locked with.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record does not exist or there is 
          an error accessing the database.</dd>
<dd><code><a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></code> - if the record is locked with a cookie
          other than cookie.</dd>
</dl>
</li>
</ul>
<a name="getNumRecords--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumRecords</h4>
<pre>public final&nbsp;int&nbsp;getNumRecords()</pre>
<div class="block">Returns the number of records in the data file,
 not including records marked as deleted.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of records currently in the data file.</dd>
</dl>
</li>
</ul>
<a name="moveTo-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveTo</h4>
<pre>protected final&nbsp;long&nbsp;moveTo(int&nbsp;recNo)</pre>
<div class="block">Returns a file pointer to the start of the requested record within
 the data file, even if the record does not exist so that the file
 pointer can be positioned for writing new records.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be accessed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the file pointer to the location of the start of the requested
          record within the data file.</dd>
</dl>
</li>
</ul>
<a name="findRecord-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findRecord</h4>
<pre>protected&nbsp;long&nbsp;findRecord(int&nbsp;recNo)
                   throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Returns a file pointer to the start of the requested record within
 the data file if the record exists, otherwise a
 <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db"><code>RecordNotFoundException</code></a> is thrown.
 <p>
 This method also finds deleted records.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be found.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the file pointer to the location of the start of the requested
          record within the data file.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record is not in the database.</dd>
</dl>
</li>
</ul>
<a name="findUndeletedRecord-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findUndeletedRecord</h4>
<pre>protected&nbsp;long&nbsp;findUndeletedRecord(int&nbsp;recNo)
                            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Returns the file pointer with which to locate the start of the
 requested record within the data file.
 This method only finds records that are not marked as deleted.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to be found.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the file pointer to the location of the start of the requested
          record within the data file.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code> - if the record is not in the database
          or is deleted.</dd>
</dl>
</li>
</ul>
<a name="checkLock-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkLock</h4>
<pre>protected&nbsp;void&nbsp;checkLock(int&nbsp;recNo,
                         long&nbsp;cookie)
                  throws <a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></pre>
<div class="block">Checks if the record specified by the record number is locked with
 the given lock cookie and throws a SecurityException if it isn't.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recNo</code> - the record number of the record to check the lock 
          credentials.</dd>
<dd><code>cookie</code> - the lock cookie to compare with the stored cookie.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></code> - if the record is locked with a cookie other
          than the one specified.</dd>
</dl>
</li>
</ul>
<a name="write-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>write</h4>
<pre>protected final&nbsp;void&nbsp;write(java.lang.String[]&nbsp;data)
                    throws java.io.IOException</pre>
<div class="block">Writes the data given as the argument to the current location in
 the data file.
 The file pointer must be positioned just after the deleted flag
 of the record in question.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - the data to be written to the record.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if there is an error writing to the file.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../suncertify/db/BookingDBFactory.html" title="class in suncertify.db"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../suncertify/db/DB.html" title="interface in suncertify.db"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?suncertify/db/Data.html" target="_top">Frames</a></li>
<li><a href="Data.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
